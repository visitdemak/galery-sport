<!DOCTYPE html>
<html>
<head>
    <title>Editor</title>
    <meta charset="UTF-8">
    <meta content="dark light" name="color-scheme"/>
    <link href="lib/codemirror.css" rel="stylesheet">
    <link href="addon/dialog/dialog.css" rel="stylesheet">
    <link href="addon/simplescrollbars.css" rel="stylesheet">
    <link href="theme/base16-dark.css" rel="stylesheet">
    <script src="lib/codemirror.js"></script>
    <script src="mode/htmlmixed.js"></script>
    <script src="mode/css.js"></script>
    <script src="mode/javascript.js"></script>
    <script src="mode/xml.js"></script>
    <script src="addon/active-line.js"></script>
    <script src="addon/search/search.js"></script>
    <script src="addon/search/searchcursor.js"></script>
    <script src="addon/search/jump-to-line.js"></script>
    <script src="addon/dialog/dialog.js"></script>
    <script src="addon/simplescrollbars.js"></script>
    <script src="lib/beautify.min.js"></script>
    <script src="lib/beautify-css.min.js"></script>
    <script src="lib/beautify-html.min.js"></script>
</head>
  <body style="margin: 0 0 0 0;">
<script>
    editor = CodeMirror(document.body, {
        mode: "text/html",
        value: html_beautify(Client.getHtml()),
        lineNumbers: true,
        fixedGutter: false,
        styleActiveLine: true,
        spellcheck: false,
        scrollbarStyle: "overlay",
        autocorrect: false,
        autocapitalize: false,
    })
    editor.setSize("100vw", "100vh")
    editor.refresh = Client.hideProgress()

    if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
        editor.setOption("theme", "base16-dark")
    }
      function saveToFile(uri) {
        Client.saveToFile(editor.getValue(), uri)
    }
    function apply() {
        Client.apply(editor.getValue())
    }


</script>
</body>
</html>

